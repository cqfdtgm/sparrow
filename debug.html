## index.html
## 包含块名：menu.html
## mako参数列表
## onlines 在线用户列表，来自session文件
## 模块：os, threading, cherrypy

<%inherit file="base.html" />

<%block name="body1">
<body>
<%include file="menu.html" />
<h2>cherrypy.session (${len(onlines)})</h2>
    % for key,value in that.onlines.items(): ## 在线使用直接的命名空间
    <table class="easyui-datagrid" title="${key}:${value.get('name','访客')}" style="width:700px;height:250px" data-options="singleSelect:true,collapsible:true">
	    <thead><tr>
		    <th data-options="field:'key'">key</th>
		    <th data-options="field:'values' ">value</th>
    </tr> </thead>
	<tbody>
	% for k, v in value.items():
	<tr><td>${k}</td><td>${str(v)|h}</td></tr>
	% endfor
    </tbody>
    </table>
    %endfor
<br />
<h2>os.environ</h2>
<table class="easyui-datagrid" title="os.environ" style="width:700px;height:250px" data-options="singleSelect:true,collapsible:true">
    <thead><tr>
	<th data-options="field:'key'">key</th>
	<th data-options="field:'values' ">value</th>
</tr> </thead>
<tbody>
% for k, v in that.os.environ.items():
##<tr><td>${k}</td><td>$v.decode('gb2312').encode('utf8')</td></tr>
<tr><td>${k}</td><td>${v|h}</td></tr>
% endfor
</tbody>
</table>

<br />
	<h2>threadings</h2>
	<table class="easyui-datagrid" title="cherrypy.request.wsgi_environ" style="width:700px;height:250px" data-options="singleSelect:true,collapsible:true">
		<thead><tr>
			<th data-options="field:'_name'">key</th>
			<th data-options="field:'_initialized' ">value</th>
	</tr> </thead>
	<tbody>
		% for th in that.threading.enumerate():
	##<tr><td>${k}</td><td>$v.decode('gb2312').encode('utf8')}</td></tr>
	<tr><td>${th._name}</td><td>${th._initialized}</td></tr>
	% endfor
</tbody>
</table>

<br />
	<h2>cherrypy.request.headers</h2>
	<table class="easyui-datagrid" title="cherrypy.request.wsgi_environ" style="width:700px;height:250px" data-options="singleSelect:true,collapsible:true">
		<thead><tr>
			<th data-options="field:'key'">key</th>
			<th data-options="field:'values' ">value</th>
	</tr> </thead>
	<tbody>
		% for k, v in that.cherrypy.request.headers.items():
	##<tr><td>${k}</td><td>$v.decode('gb2312').encode('utf8')}</td></tr>
	<tr><td>${k}</td><td>${str(v)|h}</td></tr>
	% endfor
</tbody>
</table>

<br />
	<h2>cherrypy.response.headers</h2>
	<table class="easyui-datagrid" title="cherrypy.request.wsgi_environ" style="width:700px;height:250px" data-options="singleSelect:true,collapsible:true">
		<thead><tr>
			<th data-options="field:'key'">key</th>
			<th data-options="field:'values' ">value</th>
	</tr> </thead>
	<tbody>
		% for k, v in that.cherrypy.response.headers.items():
	##<tr><td>${k}</td><td>$v.decode('gb2312').encode('utf8')}</td></tr>
	<tr><td>${k}</td><td>${str(v)|h}</td></tr>
	% endfor
</tbody>
</table>
<br />
	<h2>cherrypy.request.wsgi_environ</h2>
	<table class="easyui-datagrid" title="cherrypy.request.wsgi_environ" style="width:700px;height:250px" data-options="singleSelect:true,collapsible:true">
		<thead><tr>
			<th data-options="field:'key'">key</th>
			<th data-options="field:'values' ">value</th>
	</tr> </thead>
	<tbody>
		% for k, v in that.cherrypy.request.wsgi_environ.items():
	##<tr><td>${k}</td><td>$v.decode('gb2312').encode('utf8')}</td></tr>
	<tr><td>${k}</td><td>${str(v)|h}</td></tr>
	% endfor
</tbody>
</table>

</body>
</%block>
